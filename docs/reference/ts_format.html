<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Format line list data into time series — ts_format • ExcessILI</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Format line list data into time series — ts_format" />
<meta property="og:description" content="ts_format takes a line list of case data and formats it into weekly 
  or daily time series, which can be used to fit a seasonal baseline." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ExcessILI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ESSENCE.html">Going from line list data to an interactive app</a>
    </li>
    <li>
      <a href="../articles/ILINet.html">Using ExcessILI with ILINet</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Format line list data into time series</h1>
    
    <div class="hidden name"><code>ts_format.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>ts_format</code> takes a line list of case data and formats it into weekly 
  or daily time series, which can be used to fit a seasonal baseline.</p>
    </div>

    <pre class="usage"><span class='fu'>ts_format</span>(
  <span class='no'>line.list</span>,
  <span class='no'>datevar</span>,
  <span class='no'>statevar</span>,
  <span class='kw'>sub.statevar</span> <span class='kw'>=</span> <span class='st'>"none"</span>,
  <span class='kw'>agevar</span> <span class='kw'>=</span> <span class='st'>"none"</span>,
  <span class='no'>syndromes</span>,
  <span class='kw'>resolution</span> <span class='kw'>=</span> <span class='st'>"day"</span>,
  <span class='kw'>remove.final</span> <span class='kw'>=</span> <span class='no'>F</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>line.list</th>
      <td><p>A dataframe containing one line for each case (e.g., ED
visit, hospitalization).  At a minimum, each row should have the date of
the visit (<code>YYYY-MM-DD</code>), the state code (e.g. <code>"NY"</code>), and a
0/1 variable for each syndrome of interest (e.g. influenza-like illness,
fever, cough). All visits should be included in the dataframe, even if the
case did not have any of the syndromes of interest. For instance, for
emergency department data, every ED visit should have a line represented
in the dataframe</p></td>
    </tr>
    <tr>
      <th>datevar</th>
      <td><p>A string. What variable contains the date?</p></td>
    </tr>
    <tr>
      <th>statevar</th>
      <td><p>A string. What variable contains the 2-digit state code
(e.g., <code>"NY"</code>)?</p></td>
    </tr>
    <tr>
      <th>sub.statevar</th>
      <td><p>A string. What variable contains the local geography
identifier? (e.g., county, borough)</p></td>
    </tr>
    <tr>
      <th>agevar</th>
      <td><p>A string. What variable contains the age group? Use 'none'
if there is no age grouping in the data</p></td>
    </tr>
    <tr>
      <th>syndromes</th>
      <td><p>A character vector. Which variables contain counts of
syndromic data? (e.g., <code><a href='https://rdrr.io/r/base/c.html'>c('ili', 'respiratory')</a></code>)</p></td>
    </tr>
    <tr>
      <th>resolution</th>
      <td><p>One of <code><a href='https://rdrr.io/r/base/c.html'>c("day", "week", "month")</a></code>. What is the data
binned by?</p></td>
    </tr>
    <tr>
      <th>remove.final</th>
      <td><p>A logical scalar. Remove the final date in the dataset?
This is someties helpful if the data from the last date is unfinalized
or otherwise untrustworthy.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataframe in the "long" format, with a row for each time period
  (as in, week or day), and location (e.g. state, county), and age category.
  There is a column for date, age category, location, and the number of
  counts for each of the selected syndromes. There is also a column that
  tallies all visits, regardless of cause</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='no'>n.obs</span> <span class='kw'>&lt;-</span> <span class='fl'>10000</span>
 <span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>42</span>)

 <span class='no'>simulated_data</span> <span class='kw'>&lt;-</span>
   <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fl'>NA</span>, <span class='kw'>nrow</span><span class='kw'>=</span><span class='no'>n.obs</span>, <span class='kw'>ncol</span><span class='kw'>=</span><span class='fl'>5</span>))

 <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>simulated_data</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>'state'</span>,<span class='st'>'date'</span>,<span class='st'>'agegrp'</span>,<span class='st'>'ili'</span>,<span class='st'>'resp'</span>)

 <span class='no'>simulated_data</span>$<span class='no'>state</span><span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>( <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>'CT'</span>, <span class='kw'>times</span><span class='kw'>=</span><span class='no'>n.obs</span>*<span class='fl'>0.3</span>),
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"NY"</span>, <span class='kw'>times</span><span class='kw'>=</span><span class='no'>n.obs</span>*<span class='fl'>0.7</span>) )

 <span class='no'>simulated_data</span>$<span class='no'>agegrp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='no'>n.obs</span>, <span class='kw'>replace</span><span class='kw'>=</span><span class='no'>T</span>)
 <span class='no'>simulated_data</span>$<span class='no'>date</span>   <span class='kw'>&lt;-</span>
   <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/seq.Date.html'>seq.Date</a></span>(<span class='kw'>from</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>'2019-01-01'</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='st'>'day'</span>, <span class='kw'>length.out</span><span class='kw'>=</span><span class='fl'>500</span>),
          <span class='fl'>1000</span>,
          <span class='kw'>replace</span><span class='kw'>=</span><span class='no'>T</span>)

 <span class='no'>simulated_data</span>$<span class='no'>ili</span>  <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span>(<span class='kw'>n</span><span class='kw'>=</span><span class='no'>n.obs</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>prob</span><span class='kw'>=</span><span class='fl'>0.05</span>)
 <span class='no'>simulated_data</span>$<span class='no'>resp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Binomial.html'>rbinom</a></span>(<span class='kw'>n</span><span class='kw'>=</span><span class='no'>n.obs</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>prob</span><span class='kw'>=</span><span class='fl'>0.1</span>)

 <span class='no'>ts1</span> <span class='kw'>&lt;-</span> <span class='fu'>ts_format</span>(<span class='kw'>line.list</span><span class='kw'>=</span><span class='no'>simulated_data</span>,
                  <span class='kw'>datevar</span><span class='kw'>=</span><span class='st'>'date'</span>,
                  <span class='kw'>agevar</span><span class='kw'>=</span><span class='st'>'agegrp'</span>,
                  <span class='kw'>statevar</span><span class='kw'>=</span><span class='st'>'state'</span>,
                  <span class='kw'>syndromes</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>'ili'</span>,<span class='st'>'resp'</span>))</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Daniel Weinberger, Kelsie Cassell, Marcus Russi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


